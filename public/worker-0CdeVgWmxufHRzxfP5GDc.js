self.addEventListener("push",t=>{if(!t||!t.data)return;let n={};try{n=t.data.json()}catch(i){try{n=JSON.parse(t.data.text())}catch(i){n={body:t.data.text()}}}const i=n.title||"Truc Xinh Preschool",o={body:n.body||"You have a new notification.",icon:n.icon||"/icon-192.png",badge:n.badge||"/icon-192.png",tag:n.tag,data:{url:n.url||"/"}};t.waitUntil(self.registration.showNotification(i,o))}),self.addEventListener("notificationclick",t=>{var n;t.notification.close();const i=(null===(n=t.notification)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.url)||"/";t.waitUntil(self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(t=>{for(const n of t)if(n.url===i&&"focus"in n)return n.focus();if(self.clients.openWindow)return self.clients.openWindow(i)}))});